{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faPaperPlane}from'@fortawesome/free-solid-svg-icons';import ScrollToBottom from'react-scroll-to-bottom';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function After(props){const{name,id,socket}=props;const[messages,setMessages]=useState([]);const[inputValue,setInputValue]=useState('');useEffect(()=>{const newUserJoinedHandler=data=>{appendMessage(data.message,'left');};const messageReceivedHandler=data=>{appendMessage(data.message,'left');};socket.on('new-user-joined',newUserJoinedHandler);socket.on('message-received',messageReceivedHandler);return()=>{socket.off('new-user-joined',newUserJoinedHandler);socket.off('message-received',messageReceivedHandler);};},[socket]);const appendMessage=(msg,position)=>{setMessages(prevMessages=>[...prevMessages,{message:msg,position}]);};const sendMessage=()=>{if(inputValue.trim()!==''){const message=inputValue.trim();setMessages(prevMessages=>[...prevMessages,{message:\"You: \".concat(message),position:'right'}]);socket.emit('message',message);setInputValue('');}};const handleKeyDown=e=>{if(e.key==='Enter'){e.preventDefault();sendMessage();}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ScrollToBottom,{className:\"after\",children:messages.map((msg,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"message \".concat(msg.position),children:/*#__PURE__*/_jsx(\"h2\",{children:msg.message})},index))}),/*#__PURE__*/_jsxs(\"div\",{className:\"message-box\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input-2\",placeholder:\"Enter your message\",value:inputValue,onChange:e=>setInputValue(e.target.value),onKeyDown:handleKeyDown}),/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faPaperPlane,onClick:sendMessage})]})]});}","map":{"version":3,"names":["React","useState","useEffect","useRef","FontAwesomeIcon","faPaperPlane","ScrollToBottom","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","After","props","name","id","socket","messages","setMessages","inputValue","setInputValue","newUserJoinedHandler","data","appendMessage","message","messageReceivedHandler","on","off","msg","position","prevMessages","sendMessage","trim","concat","emit","handleKeyDown","e","key","preventDefault","children","className","map","index","type","placeholder","value","onChange","target","onKeyDown","icon","onClick"],"sources":["D:/Chat_app/my-react-app/src/after.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPaperPlane } from '@fortawesome/free-solid-svg-icons';\r\nimport ScrollToBottom from 'react-scroll-to-bottom';\r\n\r\nexport default function After(props) {\r\n  const { name, id, socket } = props;\r\n  const [messages, setMessages] = useState([]);\r\n  const [inputValue, setInputValue] = useState('');\r\n \r\n\r\n  useEffect(() => {\r\n    const newUserJoinedHandler = (data) => {\r\n      appendMessage(data.message, 'left');\r\n    };\r\n\r\n    const messageReceivedHandler = (data) => {\r\n      appendMessage(data.message, 'left');\r\n     \r\n    };\r\n\r\n    socket.on('new-user-joined', newUserJoinedHandler);\r\n    socket.on('message-received', messageReceivedHandler);\r\n\r\n    return () => {\r\n      socket.off('new-user-joined', newUserJoinedHandler);\r\n      socket.off('message-received', messageReceivedHandler);\r\n    };\r\n  }, [socket]);\r\n\r\n  const appendMessage = (msg, position) => {\r\n    setMessages((prevMessages) => [...prevMessages, { message: msg, position }]);\r\n  };\r\n\r\n  const sendMessage = () => {\r\n    if (inputValue.trim() !== '') {\r\n      const message = inputValue.trim();\r\n      setMessages((prevMessages) => [...prevMessages, { message: `You: ${message}`, position: 'right' }]);\r\n      socket.emit('message', message);\r\n      setInputValue('');\r\n\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (e) => {\r\n    if (e.key === 'Enter') {\r\n      e.preventDefault();\r\n      sendMessage();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <ScrollToBottom className=\"after\">\r\n        {messages.map((msg, index) => (\r\n          <div className={`message ${msg.position}`} key={index}>\r\n            <h2>{msg.message}</h2>\r\n          </div>\r\n        ))}\r\n      </ScrollToBottom>\r\n      <div className=\"message-box\">\r\n        <input\r\n          type=\"text\"\r\n          className=\"input-2\"\r\n          placeholder=\"Enter your message\"\r\n          value={inputValue}\r\n          onChange={(e) => setInputValue(e.target.value)}\r\n          onKeyDown={handleKeyDown}\r\n        />\r\n        <FontAwesomeIcon icon={faPaperPlane} onClick={sendMessage} />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}